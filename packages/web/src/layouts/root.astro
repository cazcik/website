---
import { ViewTransitions } from "astro:transitions";

import "../styles/index.css";

interface Props {
  title: string;
  description: string;
  image?: string;
}

const canonicalURL = new URL(Astro.url.pathname, Astro.site);

const { title, description, image = "/icon.png" } = Astro.props;
---

<html lang="en" class="scroll-smooth bg-white text-black antialiased">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/icon.png" type="image/png" />
    <link rel="canonical" href={canonicalURL} />
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={new URL(image, Astro.url)} />
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={Astro.url} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={new URL(image, Astro.url)} />
    <link
      rel="alternate"
      type="application/rss+xml"
      title="Zac Wojcik's Blog"
      href="/rss.xml"
    />
    <link
      rel="preload"
      href="/fonts/source-sans-3vf-upright.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="/fonts/source-sans-3vf-italic.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <ViewTransitions />
  </head>
  <body>
    <div
      class="mx-auto mb-20 flex max-w-xl flex-col md:mt-20 md:max-w-2xl md:flex-row lg:max-w-4xl"
    >
      <header class="bg-white px-5 py-5 md:py-0">
        <div
          class="flex items-center gap-x-5 md:flex-col md:items-end md:justify-normal md:gap-x-0 md:gap-y-8"
        >
          <a href="/" class="flex">
            <img
              src="/icon.png"
              class="h-10 w-10 items-end rounded-full md:h-14 md:w-14"
              alt="a black and white illustration of a man in a cartoonish style"
            />
          </a>
          <div
            class="flex gap-x-5 px-2 md:flex-col md:items-end md:gap-x-0 md:gap-y-3"
          >
            <a href="/blog" class="text-neutral-500 hover:text-neutral-700"
              >blog</a
            >
            <a
              href="/newsletter"
              class="text-neutral-500 hover:text-neutral-700">newsletter</a
            >
          </div>
        </div>
      </header>
      <main class="w-full px-5 pt-5 md:ml-5">
        <slot />
      </main>
    </div>
    <script
      defer
      data-domain="cazcik.com"
      data-api="https://circles.cazcik.com/api/event"
      src="https://circles.cazcik.com/js/script.js"></script>
  </body>
</html>
