---
import { getCollection } from "astro:content";

import Root from "../../layouts/root.astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Root
  title="Blog ï¹£ Zac Wojcik"
  description="I write about things like security, technology, and business; occasionally."
>
  <div>
    <h1 class="mb-2 text-xl font-bold text-black">blog</h1>
    <p class="text-neutral-600">
      sometimes i feel inclined enough to write about things like security,
      technology, and business.
    </p>
  </div>
  {
    posts && posts.length > 0 ? (
      <div class="mt-10">
        <div>
          <h2 class="text-xl font-semibold text-black">posts</h2>
        </div>
        <div class="mt-2">
          {posts.map((post) => (
            <a href={`/blog/${post.slug}`}>
              <p class="lowercase text-black">{post.data.title}</p>
              <p class="text-sm text-neutral-600">
                {new Date(post.data.pubDate).toLocaleDateString()}
              </p>
            </a>
          ))}
        </div>
      </div>
    ) : (
      <div class="mt-10">
        <span class="italic">aw, nothing here yet..</span>
      </div>
    )
  }
</Root>
